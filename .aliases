# vim: noai:ft=sh

# ===  General  ================================================================
alias gpg='gpg2'
alias top='htop'
alias refresh_zsh='source $ZDOTDIR/.zshrc'

alias tmux='tmux -f $ZDOTDIR/tmux.conf'
alias tmuxa='tmux attach'

#===  ls  =====================================================================
# use coreutils `ls` if possibleâ€¦
hash gls >/dev/null 2>&1 || alias gls="ls"

if gls --color > /dev/null 2>&1; then # GNU `ls`
  colorflag="--color"
else # OS X `ls`
  colorflag="-G"
fi

alias l='ls -lah'

# ls options: F = put `/` after folders, h = byte unit suffixes, color! (even with piping to awk)
alias ls='CLICOLOR_FORCE=1 gls -aFh ${colorflag} --group-directories-first'

# List ALL files (colorized() in long format, show permissions in octal
lsl() {
  ls -l $1 | awk "
{
  k=0;
  for (i=0;i<=8;i++)
    k+=((substr(\$1,i+2,1)~/[rwx]/)*2^(8-i));
    if (k)
      printf(\"%0o \",k);
    printf(\" %9s  %3s %2s %5s  %6s  %s %s %s\n\", \$3, \$6, \$7, \$8, \$5, \$9,\$10, \$11);
}"
}

# Need to alias this, ll as a function was erroring
alias ll='lsl'

# List only directories
alias lsd='ls -l | grep "^d"'


# ===  Ruby  ===================================================================
alias be='bundle exec'
alias r='rails'

# ===  Vim  ====================================================================
alias vim="VIMPATH=$ZDOTDIR/vim vim -u $ZDOTDIR/vim/vimrc"
alias v="vim"

# ===  CTags  ==================================================================
alias ctags="HOME=$ZDOTDIR ctags"

# ===  Git  ====================================================================
#
alias git='HOME=$ZDOTDIR /usr/bin/env git'
alias g='git'
alias gst='g status --short'
alias gup='g fetch && g rebase'
alias gp='g push'
alias gpl='g pull'
alias gc='g commit -v'
alias gca='g commit -v -a'
alias gco='g checkout'
alias gb='g branch'
alias gba='g branch -a'
alias gcount='g shortlog -sn'
alias gcp='g cherry-pick'
alias gl='g log --graph --abbrev-commit --date=relative'
alias glg='g log --stat --max-count=5'
alias gra='g --no-pager log --graph --abbrev-commit --date=relative -20'
alias gd='g diff'
alias gprev='content'
alias gco-first='g checkout `g rev-list master | tail -1`'
alias gco-prev='g checkout `g rev-list --topo-order HEAD..master | tail -1`'
alias gco-back='g checkout HEAD~'

gdv() { gd -w "$@" | view - }
gg () { gc -a -m "$*" }
